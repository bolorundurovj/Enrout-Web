<div class="flex h-screen w-full flex-col overflow-hidden">
  <flowbite-navbar [fluid]="true" extraClass="border-b">
    <div class="flex items-center">
      <svg
        (click)="sidebarService.toggleCollapsed()"
        class="mr-6 h-6 w-6 cursor-pointer text-gray-600 dark:text-gray-400"
        fill="currentColor"
        height="1em"
        stroke="currentColor"
        stroke-width="0"
        viewBox="0 0 20 20"
        width="1em"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          clip-rule="evenodd"
          d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
          fill-rule="evenodd"
        ></path>
      </svg>
      <a
        class="cursor-pointer text-xl font-semibold dark:text-white"
        routerLink=""
      >Enrout</a>
      <!--      <a-->
      <!--        class="cursor-pointer text-xl font-semibold dark:text-white capitalize"-->
      <!--        routerLink=""-->
      <!--      >Enrout {{user!.role.toLowerCase()}} portal</a>-->
    </div>
    <div class="flex items-center gap-2">
      <!-- Notifications -->
      <button
        (click)="displayNotifications()"
        class="relative p-2 text-gray-500 rounded-lg hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-700"
        data-dropdown-toggle="notification-dropdown" type="button">
        <span class="sr-only">View notifications</span>
        <!-- Bell icon -->
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"></path>
        </svg>
        <div *ngIf="notifications.length > 0"
             class="absolute inline-flex items-center justify-center w-3 h-3 text-xs font-bold text-white bg-red-500 border-2 border-white rounded-full top-1 dark:border-gray-900">
          &nbsp;
        </div>
      </button>
      <!-- Dropdown menu -->
      <div [ngClass]="{'hidden': !showNotifications, 'notif': showNotifications}"
           class="z-20 z-50 max-w-sm my-4 overflow-hidden text-base list-none bg-white divide-y divide-gray-100 rounded shadow-lg dark:divide-gray-600 dark:bg-gray-700"
           id="notification-dropdown">
        <div
          class="block px-4 py-2 text-base font-medium text-center text-gray-700 bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
          Notifications
        </div>
        <div>
          <a
            *ngFor="let n of notifications;"
            class="flex px-4 py-3 border-b hover:bg-gray-100 dark:hover:bg-gray-600 dark:border-gray-600 cursor-pointer">
            <div class="flex-shrink-0">
              <div class="rounded-full w-11 h-11 bg-slate-200 flex flex-col items-center justify-center">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="1.5"
                     viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"
                    stroke-linecap="round"
                    stroke-linejoin="round"/>
                </svg>
              </div>
              <div
                class="absolute flex items-center justify-center w-5 h-5 ml-6 -mt-5 border border-white rounded-full bg-primary-700 dark:border-gray-700">
                <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20"
                     xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M8.707 7.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l2-2a1 1 0 00-1.414-1.414L11 7.586V3a1 1 0 10-2 0v4.586l-.293-.293z"></path>
                  <path
                    d="M3 5a2 2 0 012-2h1a1 1 0 010 2H5v7h2l1 2h4l1-2h2V5h-1a1 1 0 110-2h1a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V5z"></path>
                </svg>
              </div>
            </div>
            <div class="w-full pl-3">
              <div class="text-gray-500 font-normal text-sm mb-1.5 dark:text-gray-400">{{n.message}}
              </div>
              <div
                class="text-xs font-medium text-primary-700 dark:text-primary-400">{{n.formattedDate | fromNow}}</div>
            </div>
          </a>
        </div>
        <a (click)="showNotifications = false"
           class="block py-2 text-base font-normal text-center text-gray-900 bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:text-white dark:hover:underline"
           routerLink="/notifications">
          <div class="inline-flex items-center ">
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
              <path clip-rule="evenodd"
                    d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"
                    fill-rule="evenodd"></path>
            </svg>
            View all
          </div>
        </a>
      </div>
      <flowbite-dark-theme-toggle></flowbite-dark-theme-toggle>
      <!-- Profile -->
      <div class="flex items-center ml-3">
        <div>
          <button (click)="displayProfile()" aria-expanded="false"
                  class="flex text-sm bg-gray-800 rounded-full focus:ring-4 focus:ring-gray-300 dark:focus:ring-gray-600"
                  data-dropdown-toggle="dropdown-2" id="user-menu-button-2" type="button">
            <span class="sr-only">Open user menu</span>
            <img alt="user photo" class="w-8 h-8 rounded-full object-cover"
                 src="https://images.unsplash.com/photo-1546525848-3ce03ca516f6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1170&q=80">
          </button>
        </div>
        <!-- Dropdown menu -->
        <div [ngClass]="{'hidden': !showProfile, 'notif': showProfile}"
             class="z-50 my-4 text-base list-none bg-white divide-y divide-gray-100 rounded shadow dark:bg-gray-700 dark:divide-gray-600"
             id="dropdown-2">
          <div class="px-4 py-3" role="none">
            <p class="text-sm text-gray-900 dark:text-white mb-1 text-center font-bold" role="none">
              {{user?.fullName || 'NA' }}
            </p>
            <p class="text-sm font-medium text-gray-900 truncate dark:text-gray-300" role="none">
              {{user?.email || 'NA'}}
            </p>
          </div>
          <ul class="py-1" role="none">
            <li>
              <a
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white"
                href="{{user!.role.toLowerCase()}}/settings"
                role="menuitem">Settings</a>
            </li>
            <li>
              <a
                (click)="logout()"
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-600 dark:hover:text-white"
                role="menuitem">Sign out</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </flowbite-navbar>

  <div class="flex h-full overflow-hidden bg-gray-50 dark:bg-gray-900">
    <flowbite-sidebar extraClass="border-r px-2">
      <flowbite-sidebar-item-group>
        <flowbite-sidebar-item *ngFor="let component of components" [icon]="component.icon"
                               [link]="component.href"
                               class="mb-2">
          <span class="ml-2 w-64">{{ component.title }}

            <span *ngIf="component.title === 'Notifications'"
                  class="inline-flex items-center justify-center w-4 h-4 ml-2 p-3 text-xs font-semibold text-blue-800 bg-blue-200 rounded-full">
              {{notificationCount}}
          </span>
          </span>
        </flowbite-sidebar-item>
      </flowbite-sidebar-item-group>
    </flowbite-sidebar>
    <main class="flex-1 overflow-auto p-4">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
